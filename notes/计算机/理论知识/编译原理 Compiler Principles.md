reference：Compilers principles
# chapter 1 编译程序概述

## 程序的翻译

程序的翻译通常有两种方式：**编译**方式和**解释**方式
### 编译方式
编译方式是一种分阶段进行的方式：翻译阶段->运行阶段

编译方式下的翻译程序
	编译程序：高级语言->低级语言（汇编语言或机器语言）
	汇编程序：汇编语言->机器语言

编译方式下，源程序的执行需要分阶段
	目标是机器语言程序，源程序执行分为两大阶段
		编译阶段和运行阶段
	目标程序是汇编语言程序，源程序的执行分为三个阶段
		编译阶段，汇编阶段，运行阶段

编译方式下，生成了目标代码，且可被多次使用

对编译程序而言，源程序是输入数据，目标程序是输出结果（输入输出都是字符串）
### 解释方式
完成解释工作的解释程序将按源程序中语句的动态顺序，逐句进行分析解释源程序，并立即执行
**本质区别**：解释方式不生成目标代码，直接执行源程序本身

#### 翻译的混合方式
兼有编译和解释过程
eg.Java
	在一台机器上编译得到字节码bytecode（中间程序）
	由虚拟机对字节码加以解释执行
		字节码可以在另一台机器上解释执行

## 编译程序的工作步骤

编译程序的工作步骤大体分为
	词法分析
	语法分析
	语义分析
	中间代码优化
	目标代码生成

### 词法分析

源程序由字符组成，词法分析依据词法规则，把源程序识别为一个个最小语法单位，并识别出与其相关的属性（数据类型等），并转换成*长度统一*的标准形式token

词法规则：EBNF（Extended Backus-Naur Form）
	<>括住待描述的语法成分
	::=表示语法成分的定义
	|表示或者
	[x] x可以出现零次或者一次
	{x} x可以出现零次到多次
	x(y|z) 等价于xy或xz
![[Pasted image 20250926144023.png|200]]
token：<token-name, attribute-value>

词法分析程序：scanner

---
### 语法分析

依据语法规则，逐一分析词法分析得到的单词，把单词串分解成各类语法单位

语法分析程序：parser

---
### 语义分析

依据语言的语义规则对语法分析得到的语法结构进行==静态==语义检查

凡在编译时可以确定的内容称为静态，凡必须推迟到程序运行时才能确定的内容称为动态的

语义分析程序：semantic analyzer

---
### 代码优化

依据程序的等价变换规则，尽量压缩目标程序运行所需的时间和所占的储存空间

目标代码优化程序：target code optimizer

---
### 代码生成

代码生成程序：code generator

---
### 表格管理

等级源程序中出现的每个名字以及名字的各种属性

符号表：symbol table

---
### 出错处理

源程序中的错误有语法错误和语义错误两种

---

## 编译程序的结构
编译的分析综合模型

![[Pasted image 20250926150052.png|400]]
### 分析部分
	词法分析 Lexical Analyses
	语法分析 Syntax Analyses
	语义分析 Semantic Analyses
### 综合阶段
	中间代码生成 Intermediate Generation
	代码优化 Intermediate Optimization
	代码生成 Code Generation

## 编译程序的组织形式
### 趟pass
一趟是指一个编译程序在编译时可把源程序或源程序的等价物（中间程序）从头到尾扫描一遍并转换成另一紧邻的等价物的全过程

分为单遍扫描的编译程序和多遍扫描的编译程序
![[Pasted image 20250926150449.png|300]]
![[Pasted image 20250926150513.png|300]]


### 编译的前端（front end）和后端（back end）
前端主要由于源语言有关但于目标机器无关的哪些部分组成
后端主要包括编译中与目标机器有关的那些部分
可通过改变编译程序的后端实现编译程序的移植

## 编译程序的构造

编译程序可以用机器语言，汇编语言和高级语言实现

高级语言的自编译性
编译的自展技术：
	通过一系列自展途径而形成编译程序的过程
		先构造语言的核心部分的编译程序（可低级语言实现）

# chapter 2 文法和语言的形式定义
语言的定义涉及三个方面
- 语法syntax
	由程序设计语言的基本符号组成程序中各个语法成分的一组规则
	词法规则
	语法规则
- 语义semantics
	各语法成分在运行阶段呗计算机执行时所做的工作及其结果
	静态语义：编译时刻可确定的语法成分含义
	动态语义：运行时刻才能确定的语法成分含义
- 语用
	表示语言符号及其使用者之间的关系
	涉及符号的来源，使用和影响
		如程序的设计风格

文法描述的是高级语言程序的构成规则
## 形式语言
定义：用一组数学符号和规则来描述语言的方式称为形式描述，把所用数学符号和规则称为形式语言

形式语言只是从语法上研究语言

最基本概念：符号串和符号串集合

## 字母表和符号串集合
### 字母表alphabet

元素有穷非空的集合，字母表的元素称为符号
eg.{a,b,c,....,y,z}，{0,1}等

常用大写字母A,B...表示字母表

符号不是字符，关键字等也属于符号

一个程序设计语言只使用有限符号集作为字母表

### 符号串与符号串集合

符号串是字母表中的符号所组成的任何有穷序列，通常用小写字母表示
不含任何符号的符号串称为空串，$\varepsilon$

- 符号串的长度：符号串中符号的个数，用$|x|$表示
	$|\varepsilon|=0$
- 符号串的链接
- 符号串的方幂
- 符号串集合的乘积
- 符号串集合的方幂
- 符号串集合的闭包与正闭包

#### 串的各部分
- 串的前缀
- 串的后缀
- 串的子串
- 串的真前缀，真后缀，真子串
- 串的子序列

形式语言是字母表上的符号串的任意集合

## 文法

### 终结符号terminal/词法单元token

终结符号是组成语言的基本符号，如保留字，运算符，界限符等。
终结符号是语言的不可再分的基本符号。
终结符号形成的集合记为$V_T$
### 非终结符号nonterminal/语法变量/语法成分

非终结符号用来表示语言的语法成分，如赋值语句
非终结符号形成的集合记为$V_N$

$V_T \cap V_N = \varnothing$

### 产生式production

产生式是一个对有序对$(\alpha,\beta)$，通常写作$\alpha\rightarrow\beta$或$\alpha::=\beta$
其中$\alpha$称为产生式的左部/头部，$\beta$称为产生式的右部/体
$\alpha \in (V_T \cup V_N)^+$, $\beta \in (V_T \cup V_N)^*$
产生式是用来定义一个语法成分的形成规则

### 文法

文法是产生式的有穷非空集合

文法的形式化描述
四元组$G[S]=(V_N,V_T,P,S)$
	$V_N$ -- 非终结符号集
	$V_T$ -- 终结符号集
	P -- 表示产生式的有穷非空集合
	S -- 开始符号，至少在一条产生式中作为左部

### 文法的分类
四种类型
	0型：短语结构文法
	1型：上下文有关文法
	2型：上下文无关文法
	3型：正规（正则）文法

# chapter 3 词法分析


